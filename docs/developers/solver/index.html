
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Thoth Solver &#8212; Thoth Solver 1.13.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="/assets/solver/pygments.css" />
    <link rel="stylesheet" type="text/css" href="/assets/solver/nameko.css" />
    <script data-url_root="./" id="documentation_options" src="/assets/solver/documentation_options.js"></script>
    <script src="/assets/solver/jquery.js"></script>
    <script src="/assets/solver/underscore.js"></script>
    <script src="/assets/solver/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="thoth.solver package" href="thoth.solver.html" />

   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Lora:400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-123174547-2']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>
  
  
  <div class="indexwrapper">
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="thoth.solver.html" title="thoth.solver package"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">Thoth Solver 1.13.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Thoth Solver</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="thoth-solver">
<h1>Thoth Solver<a class="headerlink" href="#thoth-solver" title="Permalink to this headline">¶</a></h1>
<p>Python dependency solver used in <a class="reference external" href="https://thoth-station.ninja">Thoth project</a>.</p>
<p>As Python is a dynamic programming language, Thoth runs several types of
solvers that differ in software environment (operating system, native packages
present, system symbols and their versions and Python interpreter version). An
example can be a solver which is running raw RHEL 8.0 with Python 3.6, another
example can be a solver with Fedora 33 with Python 3.9 installed with different
version of glibc and some of the ABI symbols of native libraries provided by
operating system (see also Python manylinux standards and devtools for more
info).</p>
<p>See the listing built solvers used in Thoth:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://quay.io/repository/thoth-station/solver-rhel-8-py38">quay.io/thoth-station/solver-rhel-8-py38</a></p></li>
<li><p><a class="reference external" href="https://quay.io/repository/thoth-station/solver-rhel-8-py36">quay.io/thoth-station/solver-rhel-8-py36</a></p></li>
<li><p><a class="reference external" href="https://quay.io/repository/thoth-station/solver-fedora-34-py39">quay.io/thoth-station/solver-fedora-34-py39</a></p></li>
</ul>
<p>For a <a class="reference external" href="https://dev.to/fridex/how-to-beat-python-s-pip-solving-python-dependencies-2d6e">detailed explanation see this blog post</a>.</p>
<p>This solver is run in different environments (different operating systems with
various native packages provided) to obtain dependency information about Python
packages.  An important information is also the fact whether the given Python
package is installable into the environment (e.g. dependencies on native
packages being present in the environment). An example could be UBI 8 specific
solver running Python 3.8 or UBI 8 running Python 3.6 with gcc tooling for
building native extensions.</p>
<p>The source code is based on the original solver code that was implemented by
Pavel Odvody in project CuCoS.</p>
<section id="project-scope">
<h2>Project Scope<a class="headerlink" href="#project-scope" title="Permalink to this headline">¶</a></h2>
<p>The aim of this project is to answer a simple question - what packages will be
installed (resolved by pip or any Python compliant dependency resolver) for the
provided stack?</p>
<p>Imagine you have an application that has one dependency:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">tensorflow</span>
</pre></div>
</div>
<p>Tool provided by this project will tell you what dependencies will be
considered during resolution (the whole dependency graph):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">thoth-solver --verbose python -r tensorflow</span>
</pre></div>
</div>
<p>The output of this solver is a dependency analysis for the given software stack
- in the example above, package <code class="docutils literal notranslate"><span class="pre">tensorflow</span></code> in any release with analysis of
its all dependencies (direct and indirect ones) with additional information
from Python ecosystem needed for a Python resolver to perform the actual
<code class="docutils literal notranslate"><span class="pre">tensorflow</span></code> resolution.</p>
<p>The tool also allows specifying custom Python package indexes which conform to
<a class="reference external" href="https://www.python.org/dev/peps/pep-0503/">PEP-503</a> - see the <code class="docutils literal notranslate"><span class="pre">--index</span></code>
option for analyzing your custom Python packages provided by your repositories.</p>
<p>It is also possible to restrict version using standard Python version range
specifiers and/or limit the output just to direct dependencies.</p>
</section>
<section id="produced-output">
<h2>Produced output<a class="headerlink" href="#produced-output" title="Permalink to this headline">¶</a></h2>
<p>This tool (unless <code class="docutils literal notranslate"><span class="pre">--no-transitive</span></code> is specified) recursively analyzes all
the dependencies of the desired package inside a specific environment.
Dependencies to be analyzed can be defined in similar to <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>
file or as a string in a form of:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;package-name&gt;&lt;version-cmp&gt;&lt;version-identifier&gt;</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">&lt;package-name&gt;</span></code> is the analyzed package name (as present on PyPI for
example), part <code class="docutils literal notranslate"><span class="pre">&lt;version-cmp&gt;&lt;version-identifier&gt;</span></code> is optional and creates
version specifier for the given package (if not specified, all versions are
considered).</p>
<p>An example output shown bellow can be reproduced by running the tool with the
following arguments (with an example of produced log):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>thoth-solver python --requirements <span class="s1">&#39;tensorflow==2.0.0&#39;</span> --index https://pypi.org/simple --no-transitive
<span class="go">2019-10-01 14:01:02,756 [31432] INFO     root:128: Logging to a Sentry instance is turned off</span>
<span class="go">2019-10-01 14:01:02,756 [31432] INFO     root:150: Logging to rsyslog endpoint is turned off</span>
<span class="go">2019-10-01 14:01:06,838 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;tensorflow==2.0.0&#39;</span>
<span class="go">2019-10-01 14:01:07,003 [31432] INFO     thoth.solver.python.python:356: Using index &#39;https://pypi.org/simple&#39; to discover package &#39;tensorflow&#39; in version &#39;2.0.0&#39;</span>
<span class="go">2019-10-01 14:01:40,568 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;absl-py&#39; with range &#39;&gt;=0.7.0&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:40,568 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;absl-py&gt;=0.7.0&#39;</span>
<span class="go">2019-10-01 14:01:40,689 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;astor&#39; with range &#39;&gt;=0.6.0&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:40,689 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;astor&gt;=0.6.0&#39;</span>
<span class="go">2019-10-01 14:01:40,841 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;gast&#39; with range &#39;==0.2.2&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:40,841 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;gast==0.2.2&#39;</span>
<span class="go">2019-10-01 14:01:40,984 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;google-pasta&#39; with range &#39;&gt;=0.1.6&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:40,985 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;google-pasta&gt;=0.1.6&#39;</span>
<span class="go">2019-10-01 14:01:41,104 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;keras-applications&#39; with range &#39;&gt;=1.0.8&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:41,104 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;keras-applications&gt;=1.0.8&#39;</span>
<span class="go">2019-10-01 14:01:41,273 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;keras-preprocessing&#39; with range &#39;&gt;=1.0.5&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:41,274 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;keras-preprocessing&gt;=1.0.5&#39;</span>
<span class="go">2019-10-01 14:01:41,443 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;numpy&#39; with range &#39;&lt;2.0,&gt;=1.16.0&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:41,443 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;numpy&lt;2.0,&gt;=1.16.0&#39;</span>
<span class="go">2019-10-01 14:01:41,723 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;opt-einsum&#39; with range &#39;&gt;=2.3.2&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:41,723 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;opt-einsum&gt;=2.3.2&#39;</span>
<span class="go">2019-10-01 14:01:41,828 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;six&#39; with range &#39;&gt;=1.10.0&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:41,828 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;six&gt;=1.10.0&#39;</span>
<span class="go">2019-10-01 14:01:41,942 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;protobuf&#39; with range &#39;&gt;=3.6.1&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:41,943 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;protobuf&gt;=3.6.1&#39;</span>
<span class="go">2019-10-01 14:01:42,095 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;tensorboard&#39; with range &#39;&lt;2.1.0,&gt;=2.0.0&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:42,095 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;tensorboard&lt;2.1.0,&gt;=2.0.0&#39;</span>
<span class="go">2019-10-01 14:01:42,286 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;tensorflow-estimator&#39; with range &#39;&lt;2.1.0,&gt;=2.0.0&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:42,287 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;tensorflow-estimator&lt;2.1.0,&gt;=2.0.0&#39;</span>
<span class="go">2019-10-01 14:01:42,411 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;termcolor&#39; with range &#39;&gt;=1.1.0&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:42,411 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;termcolor&gt;=1.1.0&#39;</span>
<span class="go">2019-10-01 14:01:42,580 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;wrapt&#39; with range &#39;&gt;=1.11.1&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:42,581 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;wrapt&gt;=1.11.1&#39;</span>
<span class="go">2019-10-01 14:01:42,693 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;grpcio&#39; with range &#39;&gt;=1.8.6&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:42,693 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;grpcio&gt;=1.8.6&#39;</span>
<span class="go">2019-10-01 14:01:43,007 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;wheel&#39; with range &#39;&gt;=0.26&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:43,008 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;wheel&gt;=0.26&#39;</span>
<span class="go">2019-10-01 14:01:43,116 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;backports-weakref&#39; with range &#39;&gt;=1.0rc1&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:43,117 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;backports-weakref&gt;=1.0rc1&#39;</span>
<span class="go">2019-10-01 14:01:43,262 [31432] INFO     thoth.solver.python.python:405: Resolving dependency versions for &#39;enum34&#39; with range &#39;&gt;=1.1.6&#39; from &#39;https://pypi.org/simple&#39;</span>
<span class="go">2019-10-01 14:01:43,262 [31432] INFO     thoth.solver.python.python_solver:113: Parsing dependency &#39;enum34&gt;=1.1.6&#39;</span>
</pre></div>
</div>
<p>An the output can be pretty verbose, the following section describes some most
interesting parts of the output using JSONPath:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">.metadata</span></code> - metadata assigned to the solver run - these metadata are especially useful within project Thoth, where analyzer is run in a cluster, the purpose of metadata is to capture information which could be beneficial when debugging issues which arise in the cluster due to different container environment (e.g. Python version)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result</span></code> - the actual result as produced by this tool</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.unparsed</span></code> - a list of requirements that failed to be parsed (wrong dependency specification not conforming to Python standards)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.unresolved</span></code> - a list of requirements that failed to be resolved - the reason behind failure can be for example non-existing package or its version on the given Python package index, or for example incompatibility of package distribution with the solver’s software environment (Python version, environment markers, …), or bogus distribution (e.g. forgotten <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> in the distribution required by <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> on package build).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree</span></code> - the actual serialized dependency tree (broken dependency graph as cyclic dependencies are possible in Python ecosystem)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].package_name</span></code> - name of the analyzed package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].package_version</span></code> - version of the analyzed package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].sha256</span></code> - sha256 digests of artifacts present on the given Python package index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].importlib_metadata</span></code> - metadata associated with the given package, these metadata are obtained using <a class="reference external" href="https://pypi.org/project/importlib-metadata/">importlib-metadata</a>, fallback to standard <a class="reference external" href="https://docs.python.org/3.9/library/importlib.metadata.html">importlib.metadata</a> on Python3.9+</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].importlib_metadata.metadata</span></code> - package metadata - see <a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">packaging docs for more info</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].importlib_metadata.requires</span></code> - raw strings which declare the given Python package requirements as obtained by <code class="docutils literal notranslate"><span class="pre">importlib_metadata.requires</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].importlib_metadata.version</span></code> - version as obtained by <code class="docutils literal notranslate"><span class="pre">importlib_metadata.requires</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].importlib_metadata.files</span></code> - file information about the given package (additionally parsed to provide digest, file size and path) as obtained by <code class="docutils literal notranslate"><span class="pre">importlib_metadata.files</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].importlib_metadata.entry_points</span></code> - entry points as obtained by <code class="docutils literal notranslate"><span class="pre">importlib_metadata.entry_points</span></code> (additionally parsed to provide entry point name, group and value)</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;entry_points&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;console_scripts&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;saved_model_cli&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorflow.python.tools.saved_model_cli:main&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;console_scripts&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorboard&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorboard.main:run_main&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;console_scripts&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tf_upgrade_v2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorflow.tools.compatibility.tf_upgrade_v2_main:main&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;console_scripts&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tflite_convert&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorflow.lite.python.tflite_convert:main&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;console_scripts&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;toco&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorflow.lite.python.tflite_convert:main&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;console_scripts&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;toco_from_protos&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorflow.lite.toco.python.toco_from_protos:main&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sha256&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorflow_core/tools/pip_package/__init__.py&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Author&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Google Inc.&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Author-email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;packages@tensorflow.org&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Classifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Development Status :: 5 - Production/Stable&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Intended Audience :: Developers&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Intended Audience :: Education&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Intended Audience :: Science/Research&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;License :: OSI Approved :: Apache Software License&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Programming Language :: Python :: 2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Programming Language :: Python :: 2.7&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Programming Language :: Python :: 3&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Programming Language :: Python :: 3.4&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Programming Language :: Python :: 3.5&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Programming Language :: Python :: 3.6&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Programming Language :: Python :: 3.7&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Topic :: Scientific/Engineering&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Topic :: Scientific/Engineering :: Mathematics&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Topic :: Scientific/Engineering :: Artificial Intelligence&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Topic :: Software Development&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Topic :: Software Development :: Libraries&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;Topic :: Software Development :: Libraries :: Python Modules&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Download-URL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/tensorflow/tensorflow/tags&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Home-page&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://www.tensorflow.org/&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Keywords&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorflow tensor machine learning&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;License&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Apache 2.0&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Metadata-Version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tensorflow&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Platform&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;UNKNOWN&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Requires-Dist&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;absl-py (&gt;=0.7.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;astor (&gt;=0.6.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;gast (==0.2.2)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;google-pasta (&gt;=0.1.6)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;keras-applications (&gt;=1.0.8)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;keras-preprocessing (&gt;=1.0.5)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;numpy (&lt;2.0,&gt;=1.16.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;opt-einsum (&gt;=2.3.2)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;six (&gt;=1.10.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;protobuf (&gt;=3.6.1)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;tensorboard (&lt;2.1.0,&gt;=2.0.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;tensorflow-estimator (&lt;2.1.0,&gt;=2.0.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;termcolor (&gt;=1.1.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;wrapt (&gt;=1.11.1)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;grpcio (&gt;=1.8.6)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;wheel (&gt;=0.26)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;backports.weakref (&gt;=1.0rc1) ; python_version &lt; \&quot;3.4\&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;enum34 (&gt;=1.1.6) ; python_version &lt; \&quot;3.4\&quot;&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TensorFlow is an open source machine learning framework for everyone.&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0.0&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;requires&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;absl-py (&gt;=0.7.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;astor (&gt;=0.6.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;gast (==0.2.2)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;google-pasta (&gt;=0.1.6)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;keras-applications (&gt;=1.0.8)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;keras-preprocessing (&gt;=1.0.5)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;numpy (&lt;2.0,&gt;=1.16.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;opt-einsum (&gt;=2.3.2)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;six (&gt;=1.10.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;protobuf (&gt;=3.6.1)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;tensorboard (&lt;2.1.0,&gt;=2.0.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;tensorflow-estimator (&lt;2.1.0,&gt;=2.0.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;termcolor (&gt;=1.1.0)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;wrapt (&gt;=1.11.1)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;grpcio (&gt;=1.8.6)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;wheel (&gt;=0.26)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;backports.weakref (&gt;=1.0rc1) ; python_version &lt; \&quot;3.4\&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;enum34 (&gt;=1.1.6) ; python_version &lt; \&quot;3.4\&quot;&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0.0&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The example above shows data associated with <code class="docutils literal notranslate"><span class="pre">tensorflow==2.0.0</span></code>. The <code class="docutils literal notranslate"><span class="pre">files</span></code>
section is intentionally snipped, the file digest is signed as described in
<a class="reference external" href="https://www.python.org/dev/peps/pep-0427/#id16">PEP-427</a>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies</span></code> - a list of dependencies which can be resolved given requirements specification of the analyzed package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].extras</span></code> - name of extras signalizing the given package should be installed with extras as specified in <a class="reference external" href="https://www.python.org/dev/peps/pep-0508/#extras">PEP-508 in extras section</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].extra</span></code> - name of extra which should be required to take into account this dependency as specified <a class="reference external" href="https://www.python.org/dev/peps/pep-0508/#extras">PEP-508 in extras section</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].marker</span></code> - a full specification of the environment marker as described in <a class="reference external" href="https://www.python.org/dev/peps/pep-0508/#environment-markers">PEP-508 in environment markers section</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].marker_evaluation_error</span></code> - a string capturing error information when marker evaluation failed in the run software environment, otherwise <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].marker_evaluated</span></code> - marker defined by the package, but additionally adjusted for evaluation for the current environment (see notes bellow).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].marker_evaluation_result</span></code> - a boolean representing if the given marker evaluation was evaluated as <code class="docutils literal notranslate"><span class="pre">true</span></code> (the given environment accepts marker) or <code class="docutils literal notranslate"><span class="pre">false</span></code> (marker not accepted), a special value of <cite>null</cite> signalizes marker evaluation error (see <code class="docutils literal notranslate"><span class="pre">marker_evaluation_error</span></code> for more info)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].normalized_package_name</span></code> - a string representing normalized package name as described in <a class="reference external" href="https://www.python.org/dev/peps/pep-0503/#normalized-names">PEP-503 in normalized names section</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].specifier</span></code> - a version range specifier which was declared by package which depends on the given dependency conforming to <a class="reference external" href="https://www.python.org/dev/peps/pep-0440/">PEP-440</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies[*].resolved_versions</span></code> - a list of versions which were resolved given the version range specifier and specified Python package indexes (passed <code class="docutils literal notranslate"><span class="pre">--index</span></code> option can specify multiple indexes which causes package discovery on each of them)</p></li>
</ul>
<p>An example of a dependency entry (an entry from one of <code class="docutils literal notranslate"><span class="pre">.result.tree[*].dependencies</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;extras&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;extra&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;marker&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python_version &lt; \&quot;3.4\&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;marker_evaluated&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python_version &lt; \&quot;3.4\&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;marker_evaluation_error&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;marker_evaluation_result&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;normalized_package_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;backports-weakref&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;package_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;backports.weakref&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;parsed_markers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;op&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.4&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;variable&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python_version&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;resolved_versions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://pypi.org/simple&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;versions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;1.0rc1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;1.0.post1&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;specifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&gt;=1.0rc1&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>To evaluate environment markers inside solver environment, there was a need to
adjust marker so that it can be evaluated in the solver environment - see
<a class="reference external" href="https://www.python.org/dev/peps/pep-0508/#environment-markers">PEP-508 in environment markers section</a>
specification, specifically the following section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="s2">&quot;extra&quot;</span> <span class="n">variable</span> <span class="ow">is</span> <span class="n">special</span><span class="o">.</span> <span class="n">It</span> <span class="ow">is</span> <span class="n">used</span> <span class="n">by</span> <span class="n">wheels</span> <span class="n">to</span> <span class="n">signal</span> <span class="n">which</span>
<span class="n">specifications</span> <span class="n">apply</span> <span class="n">to</span> <span class="n">a</span> <span class="n">given</span> <span class="n">extra</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">wheel</span> <span class="n">METADATA</span> <span class="n">file</span><span class="p">,</span> <span class="n">but</span> <span class="n">since</span>
<span class="n">the</span> <span class="n">METADATA</span> <span class="n">file</span> <span class="ow">is</span> <span class="n">based</span> <span class="n">on</span> <span class="n">a</span> <span class="n">draft</span> <span class="n">version</span> <span class="n">of</span> <span class="n">PEP</span><span class="o">-</span><span class="mi">426</span><span class="p">,</span> <span class="n">there</span> <span class="ow">is</span> <span class="n">no</span> <span class="n">current</span>
<span class="n">specification</span> <span class="k">for</span> <span class="n">this</span><span class="o">.</span> <span class="n">Regardless</span><span class="p">,</span> <span class="n">outside</span> <span class="n">of</span> <span class="n">a</span> <span class="n">context</span> <span class="n">where</span> <span class="n">this</span> <span class="n">special</span>
<span class="n">handling</span> <span class="ow">is</span> <span class="n">taking</span> <span class="n">place</span><span class="p">,</span> <span class="n">the</span> <span class="s2">&quot;extra&quot;</span> <span class="n">variable</span> <span class="n">should</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">an</span> <span class="n">error</span> <span class="n">like</span>
<span class="nb">all</span> <span class="n">other</span> <span class="n">unknown</span> <span class="n">variables</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="installation-and-deployment">
<h2>Installation and Deployment<a class="headerlink" href="#installation-and-deployment" title="Permalink to this headline">¶</a></h2>
<p>This project is also released on <a class="reference external" href="https://pypi.org/project/thoth-solver">PyPI</a>, so the latest release can be
installed via pip or <a class="reference external" href="https://pipenv.readthedocs.io">Pipenv</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pipenv install thoth-solver</span>
</pre></div>
</div>
<p>Solver is run in <a class="reference external" href="https://thoth-station.ninja">project Thoth</a> to gather
information about package dependencies. Check <a class="reference external" href="https://github.com/thoth-station/thoth-application">thoth-station/thoth-application</a> repository for
deployment and installation instructions.</p>
</section>
<section id="running-solver-locally">
<h2>Running solver locally<a class="headerlink" href="#running-solver-locally" title="Permalink to this headline">¶</a></h2>
<p>To run solver locally, first clone the repo and install the project:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone git@github.com:thoth-station/solver.git thoth-solver</span>
<span class="go">cd thoth-solver</span>
<span class="go">pipenv install --dev</span>
<span class="go">PYTHONPATH=&#39;.&#39; ./thoth-solver-cli --help</span>
</pre></div>
</div>
<p>Now you can run the solver:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pipenv run python3 ./thoth-solver --verbose python -r &#39;selinon==1.0.0&#39; -i https://pypi.org/simple --no-transitive</span>
</pre></div>
</div>
</section>
<section id="crossroad">
<h2>Crossroad<a class="headerlink" href="#crossroad" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="../thamos">Documentation for thamos</a></p></li>
<li><p><a class="reference external" href="../adviser">Documentation for thoth-adviser</a></p></li>
<li><p><a class="reference external" href="../analyzer">Documentation for thoth-analyzer</a></p></li>
<li><p><a class="reference external" href="../common">Documentation for thoth-common</a></p></li>
<li><p><a class="reference external" href="../lab">Documentation for thoth-lab</a></p></li>
<li><p><a class="reference external" href="../package-analyzer">Documentation for thoth-package-analyzer</a></p></li>
<li><p><a class="reference external" href="../package-extract">Documentation for thoth-package-extract</a></p></li>
<li><p><a class="reference external" href="../python">Documentation for thoth-python</a></p></li>
<li><p><a class="reference external" href="../storages">Documentation for thoth-storages</a></p></li>
<li><p><a class="reference external" href="../kebechet">Documentation for kebechet</a></p></li>
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="thoth.solver.html">thoth.solver package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="thoth.solver.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="thoth.solver.python.html">thoth.solver.python package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="thoth.solver.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="thoth.solver.html#module-thoth.solver.cli">thoth.solver.cli module</a></li>
<li class="toctree-l2"><a class="reference internal" href="thoth.solver.html#module-thoth.solver.exceptions">thoth.solver.exceptions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="thoth.solver.html#module-thoth.solver">Module contents</a></li>
</ul>
</li>
</ul>
</div>
<p>This documentation corresponds to implementation in version 1.13.0,
documentation was generated on Jun 20, 2022.</p>
<section id="creating-new-solvers">
<h3>Creating New Solvers<a class="headerlink" href="#creating-new-solvers" title="Permalink to this headline">¶</a></h3>
<ol class="upperalpha simple">
<li><p>Firstly identify the upstream image that you wish to develop a new solver from. Create an overlay for that new solver in [<cite>thoth-station/s2i-thoth</cite>](<a class="reference external" href="https://github.com/thoth-station/s2i-thoth">https://github.com/thoth-station/s2i-thoth</a>). Each solver overlay should have 4 files.</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>A <cite>Dockerfile</cite> to build the image from. This should be based off of the other examples available in the (s2i-thoth-repo)[<a class="reference external" href="https://github.com/thoth-station/s2i-thoth">https://github.com/thoth-station/s2i-thoth</a>].</p></li>
<li><p>A <cite>requirements.in</cite> stating the required dependencies.</p></li>
<li><p>A <cite>requirements.txt</cite> which can be generated from pip compile using the following command once the <cite>requirements.in</cite> file is present: <cite>pip-compile –generate-hashes requirements.in</cite>.</p></li>
<li><p>An <cite>s2i_assemble.patch</cite> file. This will be used to patch the upstream image’s s2i_assemble file with the dependencies required by thoth-station.</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Documentation on custructing this patch file is already availabe [here](<a class="reference external" href="https://github.com/thoth-station/s2i-thoth/blob/master/README.rst#s2i-assemble-patches">https://github.com/thoth-station/s2i-thoth/blob/master/README.rst#s2i-assemble-patches</a>).</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<ol class="upperalpha simple" start="2">
<li><p>Secondly head over to the [solver-repo][<a class="reference external" href="https://github.com/thoth-station/solver">https://github.com/thoth-station/solver</a>], and create an overlay for your new solver. This entails:</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>Creating the overlay directory in the solver-repo root, with a <cite>Pipfile</cite> and <cite>Pipfile.lock</cite></p></li>
<li><p>Create a new overlay in the <cite>.thoth.yaml</cite> file [see example](<a class="reference external" href="https://github.com/thoth-station/solver/blob/master/.thoth.yaml#L15-L22">https://github.com/thoth-station/solver/blob/master/.thoth.yaml#L15-L22</a>)</p></li>
<li><p>Create a new overlay in the <cite>.aicoe-ci.yaml</cite> file [see example](<a class="reference external" href="https://github.com/thoth-station/solver/blob/master/.aicoe-ci.yaml#L50-L63">https://github.com/thoth-station/solver/blob/master/.aicoe-ci.yaml#L50-L63</a>)</p></li>
</ol>
</div></blockquote>
<ol class="upperalpha simple" start="3">
<li><p>Third, create a deployment for the new solver image in <cite>thoth-station/thoth-application</cite>.</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>Add your solver image to the [base imagestream file](<a class="reference external" href="https://github.com/thoth-station/thoth-application/blob/master/solver/base/imagestreams.yaml">https://github.com/thoth-station/thoth-application/blob/master/solver/base/imagestreams.yaml</a>)</p></li>
<li><p>Add your solver image to the imagestream file for the overlay you want to deploy it to. An example [here](<a class="reference external" href="https://github.com/thoth-station/thoth-application/blob/master/solver/overlays/test/imagestreamtag.yaml#L42-L55">https://github.com/thoth-station/thoth-application/blob/master/solver/overlays/test/imagestreamtag.yaml#L42-L55</a>) shows the <cite>f35-py310</cite> overlay being deployed to the <cite>test</cite> overlay.</p></li>
</ol>
</div></blockquote>
<ol class="upperalpha simple" start="4">
<li><p>Finally, create a PR in thoth-station/perscriptions to gerenate the prescriptions for the new solver overlay. The code used to generate these perscriptions is available on [this issue thread](<a class="reference external" href="https://github.com/thoth-station/adviser/issues/1961">https://github.com/thoth-station/adviser/issues/1961</a>).</p></li>
</ol>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Thoth Solver</a><ul>
<li><a class="reference internal" href="#project-scope">Project Scope</a></li>
<li><a class="reference internal" href="#produced-output">Produced output</a></li>
<li><a class="reference internal" href="#installation-and-deployment">Installation and Deployment</a></li>
<li><a class="reference internal" href="#running-solver-locally">Running solver locally</a></li>
<li><a class="reference internal" href="#crossroad">Crossroad</a><ul>
<li><a class="reference internal" href="#creating-new-solvers">Creating New Solvers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation index</a><ul>
      <li>Next: <a href="thoth.solver.html" title="next chapter">thoth.solver package</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

  
  </div>
  
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>

  </body>
</html>