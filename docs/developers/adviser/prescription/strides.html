
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Stride prescription pipeline unit &#8212; Thoth Adviser 0.52.3 documentation</title>
    <link rel="stylesheet" href="/assets/adviser/nameko.css" type="text/css" />
    <link rel="stylesheet" href="/assets/adviser/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="/assets/adviser/documentation_options.js"></script>
    <script type="text/javascript" src="/assets/adviser/jquery.js"></script>
    <script type="text/javascript" src="/assets/adviser/underscore.js"></script>
    <script type="text/javascript" src="/assets/adviser/doctools.js"></script>
    <script type="text/javascript" src="/assets/adviser/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Wrap prescription pipeline unit" href="wraps.html" />
    <link rel="prev" title="Step prescription pipeline unit" href="steps.html" />

   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Lora:400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-123174547-2']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="wraps.html" title="Wrap prescription pipeline unit"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="steps.html" title="Step prescription pipeline unit"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Thoth Adviser 0.52.3 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="stride-prescription-pipeline-unit">
<span id="prescription-strides"></span><h1>Stride prescription pipeline unit<a class="headerlink" href="#stride-prescription-pipeline-unit" title="Permalink to this headline">¶</a></h1>
<p>Declaring <a class="reference internal" href="../strides.html#strides"><span class="std std-ref">pipeline units of type stride</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pipeline unit is registered based on <code class="docutils literal notranslate"><span class="pre">should_include</span></code>
directive - <a class="reference internal" href="should_include.html#prescription-should-include"><span class="std std-ref">see documentation for more info</span></a>.</p>
</div>
<p>The following example shows all the configuration options that can be supplied
to a stride pipeline unit type. See respective sections described below for more
info.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StrideUnit</span><span class="w"></span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stride</span><span class="w"></span>
<span class="nt">should_include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># See should_include section for more info.</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w">                                            </span><span class="c1"># Criteria to trigger run of this pipeline unit. Defaults to always running the boot pipeline unit if no package_version is provided.</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w">                                          </span><span class="c1"># Optional, resolver internal state to match for the given stride.</span><span class="w"></span>
<span class="w">    </span><span class="nt">resolved_dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">werkzeug</span><span class="w">                            </span><span class="c1"># Dependencies that have to be present in the resolved state.</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~=1.0.0&quot;</span><span class="w">                        </span><span class="c1"># Version specifier specifying version range.</span><span class="w"></span>
<span class="w">      </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://pypi.org/simple&#39;</span><span class="w">      </span><span class="c1"># Index URL used when consuming the release. Can be negated using &quot;not&quot;.</span><span class="w"></span>
<span class="nt">run</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">log</span><span class="p">:</span><span class="w">                                            </span><span class="c1"># Optional text printed to logs when the unit gets called.</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Some text printed to log on pipeline unit run</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WARNING</span><span class="w"></span>
<span class="w">  </span><span class="nt">stack_info</span><span class="p">:</span><span class="w">                                     </span><span class="c1"># Information printed to the recommended stack report.</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WARNING</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello, world</span><span class="w"></span>
<span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://thoth-station.ninja</span><span class="w">             </span><span class="c1"># A link to justifications or a link to a web page.</span><span class="w"></span>
<span class="w">  </span><span class="nt">not_acceptable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Bad package inclusion</span><span class="w">           </span><span class="c1"># Block resolving the given stack.</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Configuration of prematurely terminating the resolution process.</span><span class="w"></span>
<span class="w">  </span><span class="nt">eager_stop_pipeline</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Stop</span><span class="nv"> </span><span class="s">pipeline&quot;</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a complete schema <a class="reference external" href="https://github.com/thoth-station/adviser/blob/master/thoth/adviser/prescription/v1/schema.py">check the schema.py file in adviser’s
implementation</a>.</p>
</div>
<section id="stride-match">
<span id="id1"></span><h2>Stride <code class="docutils literal notranslate"><span class="pre">match</span></code><a class="headerlink" href="#stride-match" title="Permalink to this headline">¶</a></h2>
<p>A state that needs to be met to trigger the given stride pipeline unit. The state
states resolved dependencies where each entry in the resolved dependency
listing is described as:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - optional package name that has to be stated in the resolved
dependency listing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code> - optional package version in a form of version specifier that
has to be stated in the resolved dependency listing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_url</span></code> - optional package index from which the given package is
consumed, can be negated using “<code class="docutils literal notranslate"><span class="pre">not</span></code>”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">develop</span></code> - optional, if provided it additionally specifies if the
dependency should or should not be a development dependency</p></li>
</ul>
<p>To run the given stride, all the packages in the resolved dependency listing
need to be present in the resolved software stack.</p>
<p>It is possible to provide a listing of matching criteria to run the given
pipeline unit multiple times - the run part will be reused for each <code class="docutils literal notranslate"><span class="pre">match</span></code>
entry stated.</p>
</section>
<section id="stride-run-log">
<h2>Stride <code class="docutils literal notranslate"><span class="pre">run.log</span></code><a class="headerlink" href="#stride-run-log" title="Permalink to this headline">¶</a></h2>
<p>Print the given message to the resolution log if the pipeline unit is included and run.</p>
<p>See <a class="reference internal" href="boots.html#boot-run-log"><span class="std std-ref">boot’s log</span></a> that has shared semantics.</p>
</section>
<section id="stride-run-stack-info">
<h2>Stride <code class="docutils literal notranslate"><span class="pre">run.stack_info</span></code><a class="headerlink" href="#stride-run-stack-info" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="boots.html#boot-stack-info"><span class="std std-ref">boot’s stack info</span></a> which semantics is shared with this unit.</p>
</section>
<section id="stride-run-not-acceptable">
<h2>Stride <code class="docutils literal notranslate"><span class="pre">run.not_acceptable</span></code><a class="headerlink" href="#stride-run-not-acceptable" title="Permalink to this headline">¶</a></h2>
<p>If the given pipeline unit is registered and matched, it will discard the
resolved stack matched from the resolver’s results reported.</p>
</section>
<section id="stride-run-eager-stop-pipeline">
<h2>Stride <code class="docutils literal notranslate"><span class="pre">run.eager_stop_pipeline</span></code><a class="headerlink" href="#stride-run-eager-stop-pipeline" title="Permalink to this headline">¶</a></h2>
<p>If the given pipeline unit is registered and matched, it will cause the whole
resolution process to halt and report back results computed, if any. If no results
are available, the resolution process will fail as no software stack is produced.</p>
</section>
</section>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Stride prescription pipeline unit</a><ul>
<li><a class="reference internal" href="#stride-match">Stride <code class="docutils literal notranslate"><span class="pre">match</span></code></a></li>
<li><a class="reference internal" href="#stride-run-log">Stride <code class="docutils literal notranslate"><span class="pre">run.log</span></code></a></li>
<li><a class="reference internal" href="#stride-run-stack-info">Stride <code class="docutils literal notranslate"><span class="pre">run.stack_info</span></code></a></li>
<li><a class="reference internal" href="#stride-run-not-acceptable">Stride <code class="docutils literal notranslate"><span class="pre">run.not_acceptable</span></code></a></li>
<li><a class="reference internal" href="#stride-run-eager-stop-pipeline">Stride <code class="docutils literal notranslate"><span class="pre">run.eager_stop_pipeline</span></code></a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation index</a><ul>
      <li>Previous: <a href="steps.html" title="previous chapter">Step prescription pipeline unit</a></li>
      <li>Next: <a href="wraps.html" title="next chapter">Wrap prescription pipeline unit</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../sources/prescription/strides.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

  
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>

  </body>
</html>